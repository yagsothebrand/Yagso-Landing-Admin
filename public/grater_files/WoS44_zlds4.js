;/*FB_PKG_DELIM*/

__d("BillingPlatformContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext("desktop"),c=u;l.default=c}),98);
__d("LSStoryContactSyncFromBucket",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.filter(t.db.table(7).fetch(),function(e){return!0}),function(e){var t=e.update,n=e.item;return t({profileRingColor:void 0,profileRingState:void 0})})},function(e){return t.forEach(t.filter(t.db.table(53).fetch(),function(e){return t.i64.eq(e.bucketType,t.i64.cast([0,1]))||t.i64.eq(e.bucketType,t.i64.cast([0,12]))}),function(e){var o=e.item;return t.sequence([function(e){return r[3]=o.ownerId,r[4]=o.readState,t.db.table(53).fetch([[[r[3]]],"optimistic"]).next().then(function(e,o){var a=e.done,i=e.value;return a?r[0]=t.i64.cast([0,0]):(o=i.item,t.sequence([function(e){return t.sortBy(t.filter(t.db.table(54).fetch(),function(e){return t.i64.eq(e.bucketId,o.bucketId)}),[["timestampMs","DESC"]]).next().then(function(e,o){var a=e.done,i=e.value;return a?r[5]=t.i64.cast([0,0]):(o=i.item,t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[7]=t[0],t})},function(e){return t.db.table(55).fetch([[[o.storyId,r[7],t.i64.cast([0,1])]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?(r[10]=t.i64.cast([0,1]),r[8]=r[10]):(n=a.item,r[10]=t.i64.cast([0,2]),r[8]=r[10])})},function(e){return r[5]=r[8]}]))})},function(e){return r[0]=r[5]}]))})},function(e){return t.i64.eq(r[4],t.i64.cast([0,1]))?r[2]=t.i64.cast([0,39423]):(t.i64.eq(r[4],t.i64.cast([0,2]))?r[5]=t.i64.cast([0,14342874]):r[5]=void 0,r[2]=r[5]),t.forEach(t.filter(t.db.table(7).fetch([[[r[3]]]]),function(e){return t.i64.eq(e.id,r[3])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}),function(e){var t=e.update,n=e.item;return t({profileRingState:r[0],profileRingColor:r[2]})})}])})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSStoriesStoryContactSyncFromBucketStoredProcedure",e.__tables__=["contacts","story_buckets","stories","story_viewers"],a.exports=e}),null);